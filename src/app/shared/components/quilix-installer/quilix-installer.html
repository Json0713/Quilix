@if (visible()) {
  <div
    class="qi-hub"
    role="region"
    aria-label="App installer"
    [attr.data-expanded]="expanded()"
  >
    <!-- Edge Handle -->
    <button
      class="qi-handle"
      type="button"
      aria-label="Install app"
      [attr.aria-expanded]="expanded()"
      (click)="toggle()"
      (keydown)="onKeyToggle($event)"
    >
      <i class="bi bi-download"></i>
    </button>

    @if (expanded()) {
      <!-- Slide-out Panel -->
      <div
        class="qi-panel"
        role="dialog"
        aria-modal="false"
        aria-labelledby="qi-title"
      >
        <div class="qi-panel-inner">
          <!-- Header -->
          <header class="qi-header">
            <h3 id="qi-title">Install App</h3>

            <button
              type="button"
              class="qi-close"
              aria-label="Close"
              (click)="toggle()"
            >
              <i class="bi bi-x"></i>
            </button>
          </header>

          <!-- Body -->
          <div class="qi-body">
            @if (state.platform() === 'ios') {
              <p>
                Install this app from Safari using
                <strong>Add to Home Screen</strong>.
              </p>
            } @else {
              <p>
                Install this app for faster access and offline support.
              </p>
            }
          </div>

          <!-- Actions -->
          <footer class="qi-actions">
            <button
              type="button"
              class="qi-primary"
              (click)="install()"
              [disabled]="!state.installPromptAvailable()"
            >
              <i class="bi bi-cloud-download"></i>
              <span>Install</span>
            </button>

            <button
              type="button"
              class="qi-secondary"
              (click)="toggle()"
            >
              Later
            </button>
          </footer>
        </div>
      </div>
    }
  </div>
}

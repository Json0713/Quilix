<div class="navigation-bar">
    <!-- Mobile Sidebar Toggle -->
    <button class="nav-mobile-toggle" [class.hidden]="isMobileOpen()" (click)="toggleMobileSidebar()"
        aria-label="Toggle Menu">
        <i class="bi bi-layout-sidebar"></i>
    </button>

    <!-- Left: Window Controls (File Manager style) -->
    <div class="nav-controls">
        <button class="nav-btn" [class.disabled]="!canGoBack" (click)="goBack()" title="Back">
            <i class="bi bi-arrow-left"></i>
        </button>
        <button class="nav-btn" [class.disabled]="!canGoForward" (click)="goForward()" title="Forward">
            <i class="bi bi-arrow-right"></i>
        </button>
        <button class="nav-btn" (click)="refresh()" title="Refresh">
            <i class="bi bi-arrow-clockwise"></i>
        </button>
    </div>

    <!-- Center: Address Bar / Breadcrumbs -->
    <div class="nav-address-bar">
        <div class="breadcrumbs">
            <ng-container *ngFor="let crumb of breadcrumbs; let i = index">
                <a [routerLink]="crumb.url" class="breadcrumb-item" [class.last]="crumb.isLast" (click)="onBreadcrumbClick(crumb)">
                    {{ crumb.label }}
                </a>
                <i *ngIf="!crumb.isLast" class="bi bi-chevron-right breadcrumb-separator"></i>
            </ng-container>
        </div>
    </div>

    <!-- Right: Global Search -->
    <div #navSearch class="nav-search" [class.mobile-search-active]="isMobileSearchActive">
        <!-- Mobile Search Toggle Icon (always visible on mobile) -->
        <button class="mobile-search-toggle" (click)="toggleMobileSearch()" title="Search"
            [class.active]="isMobileSearchActive">
            <i class="bi bi-search"></i>
        </button>

        <!-- Dropdown / Desktop Input Area -->
        <div class="search-container" [class.dropdown-active]="isMobileSearchActive">
            <div class="search-input-wrapper">
                <i class="bi bi-search search-icon" *ngIf="!isMobileSearchActive"></i>
                <input type="text" #searchInput class="global-search-input" placeholder="Search everywhere...">
                <!-- Keyboard shortcut hint like macOS Spotlight -->
                <div class="search-shortcut">Ctrl K</div>
            </div>

            <!-- Mobile Close Button (beside the input wrapper in dropdown) -->
            <button class="mobile-search-close" (click)="closeMobileSearch()" *ngIf="isMobileSearchActive">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>
    </div>
</div>
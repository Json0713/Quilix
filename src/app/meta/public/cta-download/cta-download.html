<section class="cta-download-section" aria-label="Install Quilix App">
    <div class="download-container" data-scroll="fade-up">

        <header class="download-header">

            @if (!state.installed()) {

                <div class="dl-tag">
                    <span class="dl-badge">
                        <i class="bi bi-cloud-arrow-down-fill"></i>
                        Install as App
                    </span>
                </div>

                <h2 class="dl-title">
                    Take Quilix <span>Everywhere.</span>
                </h2>

                <p class="dl-description">
                    Install Quilix directly onto your device.
                    Launch instantly from your home screen, work offline,
                    and experience the full workspace.
                </p>

            } @else {

                <div class="dl-tag">
                    <span class="dl-badge success">
                        <i class="bi bi-patch-check-fill"></i>
                        System Ready
                    </span>
                </div>

                <h2 class="dl-title">
                    Welcome to your <span>Workspace.</span>
                </h2>

                <p class="dl-description">
                    Quilix is installed and ready. Launch anytime from your home screen
                    for the full immersive experience.
                </p>

            }
        </header>

        <!-- Sky Visual Container -->
        <div class="sky-container">
            <div class="sky-track">

                <!-- Massive Commercial Airliner (Centered) -->
                <div class="airplane-zone">
                    <!-- Minimal Wind streaks -->
                    <div class="wind-streaks">
                        <span class="streak s1"></span>
                        <span class="streak s2"></span>
                    </div>

                    <svg class="airplane-svg" viewBox="0 0 400 150" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="airlinerBody" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" stop-color="#ffffff" />
                                <stop offset="100%" stop-color="#e2e8f0" />
                            </linearGradient>
                            <linearGradient id="airlinerWings" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" stop-color="#cbd5e1" />
                                <stop offset="100%" stop-color="#94a3b8" />
                            </linearGradient>
                            <linearGradient id="windowGlow" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" stop-color="#38bdf8" />
                                <stop offset="100%" stop-color="#0284c7" />
                            </linearGradient>
                        </defs>

                        <!-- [Z-LAYER 1] Far Elements (Drawn behind fuselage) -->
                        <path d="M185,62 L120,25 Q110,15 130,20 L280,62 Z" fill="#94a3b8" />
                        <path d="M198,42 Q198,35 228,37 L230,48 Q198,51 198,42 Z" fill="#334155" />

                        <!-- [Z-LAYER 2] Vertical Stabilizer (Tail) -->
                        <path d="M55,75 L25,18 Q20,5 50,15 L105,72 Z" fill="#0ea5e9" />
                        <path d="M50,30 Q40,20 60,40 L75,65 L55,65 Z" fill="#7dd3fc" opacity="0.5" />

                        <!-- [Z-LAYER 3] Fuselage (Modern Sleek Shape) -->
                        <path
                            d="M40,68 C120,58 300,58 380,68 L395,75 C400,78 400,82 395,85 L380,92 C300,102 120,102 40,92 L30,87 Q25,82 30,77 L40,68 Z"
                            fill="url(#airlinerBody)" />

                        <!-- [Z-LAYER 4] Cockpit & Windows -->
                        <path d="M358,69 Q380,70 388,77 L378,81 Q368,78 358,78 Z" fill="#0f172a" opacity="0.95" />
                        <g fill="url(#windowGlow)">
                            <rect x="80" y="78" width="3" height="4" rx="1.5" />
                            <rect x="95" y="78" width="3" height="4" rx="1.5" />
                            <rect x="110" y="78" width="3" height="4" rx="1.5" />
                            <rect x="125" y="78" width="3" height="4" rx="1.5" />
                            <rect x="140" y="78" width="3" height="4" rx="1.5" />
                            <rect x="155" y="78" width="3" height="4" rx="1.5" />
                            <rect x="170" y="78" width="3" height="4" rx="1.5" />
                            <rect x="185" y="78" width="3" height="4" rx="1.5" />
                            <rect x="200" y="78" width="3" height="4" rx="1.5" />
                            <rect x="215" y="78" width="3" height="4" rx="1.5" />
                            <rect x="230" y="78" width="3" height="4" rx="1.5" />
                            <rect x="245" y="78" width="3" height="4" rx="1.5" />
                            <rect x="260" y="78" width="3" height="4" rx="1.5" />
                            <rect x="275" y="78" width="3" height="4" rx="1.5" />
                            <rect x="290" y="78" width="3" height="4" rx="1.5" />
                            <rect x="305" y="78" width="3" height="4" rx="1.5" />
                            <rect x="320" y="78" width="3" height="4" rx="1.5" />
                            <rect x="335" y="78" width="3" height="4" rx="1.5" />
                        </g>

                        <!-- [Z-LAYER 5] Near Elements (Drawn in front of fuselage) -->
                        <path d="M185,92 L115,142 Q105,152 140,148 L275,88 Z" fill="url(#airlinerWings)" />
                        <path d="M195,115 Q195,108 230,110 L232,125 Q195,128 195,115 Z" fill="#475569" />

                        <!-- [Z-LAYER 6] Wind & Details -->
                        <g class="local-wind">
                            <line x1="390" y1="78" x2="415" y2="78" stroke="#ffffff" stroke-width="0.8" opacity="0.4"
                                class="nose-wind" />
                            <line x1="120" y1="25" x2="145" y2="21" stroke="#ffffff" stroke-width="0.6" opacity="0.3"
                                class="wing-wind-top" />
                        </g>

                        <g class="trails">
                            <line x1="15" y1="80" x2="-35" y2="80" stroke="#38bdf8" stroke-width="2.5"
                                class="trail t1" />
                            <line x1="15" y1="88" x2="-25" y2="88" stroke="#0ea5e9" stroke-width="1.8"
                                class="trail t2" />
                        </g>
                    </svg>
                </div>

                <!-- Interactive Button Area -->
                <div class="sky-btn-zone">

                    @if (state.canInstall()) {

                        <button
                            class="sky-install-btn"
                            (click)="install()">
                            <i class="bi bi-download"></i>
                            Install Quilix
                        </button>

                        @if (state.platform() === 'ios') {
                            <span class="sky-hint">
                                Tap share and <strong>Add to Home Screen</strong>
                            </span>
                        } @else {
                            <span class="sky-hint">
                                Open in a supported browser to install
                            </span>
                        }

                    }
                </div>

                <!-- Dense Trough Clouds (Maintain Current) -->
                <div class="clouds-layer">
                    <div class="clouds-marquee">
                        <!-- Set 1 -->
                        <div class="cloud-chunk">
                            <svg class="cloud big" viewBox="0 0 200 60">
                                <path d="M0,60 L200,60 L200,45 Q180,20 150,30 Q120,5 90,25 Q60,10 30,35 Q10,40 0,60 Z"
                                    fill="currentColor" />
                            </svg>
                            <svg class="cloud massive" viewBox="0 0 300 80" style="margin-left: -80px;">
                                <path d="M0,80 L300,80 L300,55 Q260,20 210,40 Q160,5 110,45 Q60,15 30,55 Q10,65 0,80 Z"
                                    fill="currentColor" />
                            </svg>
                            <svg class="cloud medium" viewBox="0 0 160 50" style="margin-left: -70px;">
                                <path d="M0,50 L160,50 L160,35 Q130,15 100,25 Q70,5 40,30 Q10,35 0,50 Z"
                                    fill="currentColor" />
                            </svg>
                            <svg class="cloud small" viewBox="0 0 100 40" style="margin-left: -50px;">
                                <path d="M0,40 L100,40 L100,25 Q80,10 50,20 Q20,10 0,40 Z" fill="currentColor" />
                            </svg>
                            <svg class="cloud big" viewBox="0 0 200 60" style="margin-left: -60px;">
                                <path d="M0,60 L200,60 L200,45 Q180,20 150,30 Q120,5 90,25 Q60,10 30,35 Q10,40 0,60 Z"
                                    fill="currentColor" />
                            </svg>
                        </div>
                        <!-- Set 2 -->
                        <div class="cloud-chunk" aria-hidden="true">
                            <svg class="cloud big" viewBox="0 0 200 60">
                                <path d="M0,60 L200,60 L200,45 Q180,20 150,30 Q120,5 90,25 Q60,10 30,35 Q10,40 0,60 Z"
                                    fill="currentColor" />
                            </svg>
                            <svg class="cloud massive" viewBox="0 0 300 80" style="margin-left: -80px;">
                                <path d="M0,80 L300,80 L300,55 Q260,20 210,40 Q160,5 110,45 Q60,15 30,55 Q10,65 0,80 Z"
                                    fill="currentColor" />
                            </svg>
                            <svg class="cloud medium" viewBox="0 0 160 50" style="margin-left: -70px;">
                                <path d="M0,50 L160,50 L160,35 Q130,15 100,25 Q70,5 40,30 Q10,35 0,50 Z"
                                    fill="currentColor" />
                            </svg>
                            <svg class="cloud small" viewBox="0 0 100 40" style="margin-left: -50px;">
                                <path d="M0,40 L100,40 L100,25 Q80,10 50,20 Q20,10 0,40 Z" fill="currentColor" />
                            </svg>
                            <svg class="cloud big" viewBox="0 0 200 60" style="margin-left: -60px;">
                                <path d="M0,60 L200,60 L200,45 Q180,20 150,30 Q120,5 90,25 Q60,10 30,35 Q10,40 0,60 Z"
                                    fill="currentColor" />
                            </svg>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>

    <!-- Background Blurs -->
    <div class="dl-blur-left"></div>
    <div class="dl-blur-right (USER_REVERTED_TO_ORIGINAL)"></div>
</section>